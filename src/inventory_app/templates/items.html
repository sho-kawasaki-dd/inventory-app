{% extends "layout.html" %}
{% block content %}
<h1>Items</h1>
<form id="new-item-form">
  <input type="text" name="sku" placeholder="SKU (optional)" />
  <input type="text" name="name" placeholder="Name" required />
  <input type="text" name="unit" placeholder="Unit" value="pcs" />
  <button class="btn primary" type="submit">Add</button>
</form>

<h2>List</h2>
<table id="items-table">
  <thead>
    <tr>
      <th>ID</th>
      <th>SKU</th>
      <th>Name</th>
      <th>Unit</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>
{% endblock %}
{% block scripts %}
<script>
  window.InventoryApp.loadItems();
  document.getElementById('new-item-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const fd = new FormData(e.target);
    const payload = { sku: fd.get('sku') || null, name: fd.get('name'), unit: fd.get('unit') || 'pcs' };
    await window.InventoryApp.api('/api/items', { method: 'POST', body: JSON.stringify(payload) });
    e.target.reset();
    window.InventoryApp.loadItems();
  });
</script>
{% endblock %}
